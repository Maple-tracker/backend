name: Backend ë¦¬ë·°ìš”ì²­
on:
  pull_request:
    types:
      - ready_for_review
    branches:
      - main
      - develop

jobs:
  review-request:
    name: ë¦¬ë·° ìš”ì²­ ë””ìŠ¤ì½”ë“œ ì•Œë¦¼
    runs-on: ubuntu-latest 
    steps:
      - name: discord message
        uses: appleboy/discord-action@v1.2.0
        with:
          webhook_url: ${{ secrets.BACKEND_REVIEW_REQUEST_WEBHOOK_URL }}
          message: |
            {
              "content": "<@&1354060709578805270>\n# ì–´ì´. ë¦¬ë·° ìš”ì²­ì´ ì™”ë‹¤ ðŸ’°\në‹¹ìž¥ ë¦¬ë·°í•˜ëŸ¬ ê°€ë„ë¡.\n\n## PR ë°”ë¡œê°€ê¸° ë§í¬ \n### ðŸ”— [${{ github.event.pull_request.title }}](${{ github.event.pull_request.html_url }})\n\n### ðŸ“¬ From. \n",
              "tts": false,
              "embeds": [
                {
                  "id": 183378348,
                  "description": "",
                  "fields": [],
                  "author": {
                    "name": "${{ github.event.pull_request.assignee.login }}",
                    "icon_url": "${{ github.event.sender.avatar_url }}"
                  }
                }
              ],
              "components": [],
              "actions": {},
              "username": "ì• ê·¸ë¦¬ì¹˜: PR NPC ",
              "avatar_url": "https://github.com/Maple-tracker/asset/blob/main/%E1%84%80%E1%85%A7%E1%86%BC%E1%84%86%E1%85%A2NPC.png?raw=true"
            }
    
      - name: ì•Œë¦¼ ì „ì†¡
        uses: Ilshidur/action-discord@0.3.2
        env:
          DISCORD_WEBHOOK: ${{ secrets.BACKEND_REVIEW_REQUEST_WEBHOOK_URL }}
          DISCORD_USERNAME: íŠ¸ëž˜ì»¤ ë„ìš°ë¯¸
          DISCORD_AVATAR: https://avatars.githubusercontent.com/u/204479047?s=48&v=4
          DISCORD_EMBEDS: |
            [
                { 
                  "title": "ë¦¬ë·° 'í•´ì¤˜'",
                  "color": 10478271,
                  "description": "ì´ê±° ë¦¬ë·° 'í•´' -> [${{ github.event.pull_request.title }}](${{ github.event.pull_request.html_url }})",
                  "content": "ì•¼'í•´ì¤˜'",
                  "fields": [
                    {
                      "name": "ì§±ë©‹ì§€ê²Œ ìž‘ì—…í•œ ì‚¬ëžŒ",
                      "value": "${{ github.event.issue.user.login }}",
                      "inline": true
                    }
                  ]
                }
              ]
